<odoo>
    <record id="action_my_app_items" model="ir.actions.act_window">
        <field name="name">Cotizaciones</field>
        <field name="res_model">app.quote</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem id="menu_almx_quoter_root" name="Cotizador" sequence="1"/>
    <menuitem id="menu_almx_quoter_items"
              name="Cotizaciones"
              parent="menu_almx_quoter_root"
              action="action_my_app_items"
              sequence="10"/>

    <!-- Vista tree -->
    <record id="view_app_quote_tree" model="ir.ui.view">
        <field name="name">app.quote.tree</field>
        <field name="model">app.quote</field>
        <field name="arch" type="xml">
            <tree string="Cotizaciones" default_order="date_order desc">
                <field name="name"/>
                <field name="date_order"/>
                <field name="partner_id"/>
                <field name="user_id"/>
                <field name="company"/>
                <field name="state"/>
                <field name="amount_total"/>
            </tree>
        </field>
    </record>

    <!-- Vista de búsqueda -->
    <record id="view_app_quote_search" model="ir.ui.view">
        <field name="name">app.quote.search</field>
        <field name="model">app.quote</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="partner_id"/>
                <field name="user_id"/>
                <filter name="state_draft" string="Borrador" domain="[('state','=','draft')]"/>
                <filter name="state_sent" string="Enviada" domain="[('state','=','sent')]"/>
                <filter name="state_confirmed" string="Confirmada" domain="[('state','=','confirmed')]"/>
                <filter name="state_cancel" string="Cancelada" domain="[('state','=','cancel')]"/>
                <group expand="0" string="Agrupar por">
                    <filter string="Vendedor" name="grp_user" context="{'group_by':'user_id'}"/>
                    <filter string="Estado" name="grp_state" context="{'group_by':'state'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Vista form completa -->
    <record id="view_app_quote_form" model="ir.ui.view">
        <field name="name">app.quote.form</field>
        <field name="model">app.quote</field>
        <field name="arch" type="xml">
            <form string="Cotización de Elevador">
                <sheet>
                    <group>
                        <field name="name"/>
                        <field name="date_order"/>
                        <field name="partner_id"/>
                        <field name="user_id"/>
                        <field name="company"/>
                        <field name="state"/>
                        <field name="amount_total" readonly="1"/>
                    </group>
                    <!-- Configuración General del Elevador -->
                    <group string="Configuración General del Elevador" col="4">
                        <field name="elevator_quant"/>
                        <field name="group_elevator"/>
                        <field name="capacity_elevator"/>
                        <field name="entrance_type"/>
                        <field name="door_height"/>
                        <field name="door_type"/>
                        <field name="door_width"/>
                        <field name="type_install"/>
                        <field name="car_door"/>
                        <field name="landing_door"/>
                        <field name="car_model"/>
                        <field name="car_floor"/>
                    </group>
                    <!-- Especificaciones Técnicas -->
                    <group string="Especificaciones Técnicas" col="4">
                        <field name="zona_sismica"/>
                        <field name="recorrido_de_planta_baja_a_planta_alta"/>
                        <field name="fase"/>
                        <field name="profundidad"/>
                        <field name="distancia_de_la_sala_de_maquinas_por_encima_del_piso_superior"/>
                        <field name="acabado_de_cabina"/>
                        <field name="acabado_de_media_cabina"/>
                        <field name="acabado_de_abatibles"/>
                        <field name="nomenclatura_del_piso"/>
                        <field name="tipo_de_cubo"/>
                        <field name="puerta_resistente_al_fuego"/>
                        <field name="modelo_COP"/>
                        <field name="modelo_LOP"/>
                        <field name="velocidad"/>
                        <field name="total_de_paradas"/>
                        <field name="dimenciones_de_la_cabina"/>
                        <field name="ancho_de_la_puerta"/>
                        <field name="uso_del_elevador"/>
                        <field name="regla_de_velocidad_CP"/>
                        <field name="modelo_del_elevador"/>
                        <field name="tipo_de_maquina"/>
                        <field name="tipo_de_puerta_para_el_hueco"/>
                        <field name="altura"/>
                        <field name="acabado"/>
                        <field name="tipo_de_entrada"/>
                        <field name="traccion"/>
                        <field name="ancho_de_cabina"/>
                        <field name="profundidad_de_cabina"/>
                        <field name="area_de_cabina"/>
                        <field name="area_del_cubo"/>
                        <field name="ancho_del_cubo"/>
                        <field name="profundidad_del_cubo"/>
                        <field name="rieles_de_cabina"/>
                        <field name="entrerieles_de_cabina"/>
                        <field name="rieles_de_contrapeso"/>
                        <field name="entrerieles_de_contrapeso"/>
                        <field name="sobrepeso"/>
                        <field name="fosa"/>
                        <field name="recorrido"/>
                        <field name="control"/>
                        <field name="version_del_plano"/>
                    </group>
                    <!-- Líneas de cotización -->
                    <notebook>
                        <page string="Líneas de Cotización">
                            <field name="line_ids" context="{'default_quote_id': active_id}">
                                <tree editable="bottom">
                                    <field name="sequence"/>
                                    <field name="product_id"/>
                                    <field name="name"/>
                                    <field name="quantity"/>
                                    <field name="price_unit"/>
                                    <field name="price_total"/>
                                </tree>
                                <form>
                                    <sheet>
                                        <group>
                                            <field name="sequence"/>
                                            <field name="product_id"/>
                                            <field name="name"/>
                                            <field name="quantity"/>
                                            <field name="price_unit"/>
                                            <field name="price_total" readonly="1"/>
                                        </group>
                                    </sheet>
                                </form>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_app_quote_line_tree" model="ir.ui.view">
        <field name="name">app.quote.line.tree</field>
        <field name="model">app.quote.line</field>
        <field name="arch" type="xml">
            <tree string="Líneas de Cotización">
                <field name="sequence"/>
                <field name="product_id"/>
                <field name="name"/>
                <field name="quantity"/>
                <field name="price_unit"/>
                <field name="price_total"/>
                <field name="quote_id"/>
            </tree>
        </field>
    </record>
</odoo>
